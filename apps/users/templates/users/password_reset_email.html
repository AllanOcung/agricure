{% load i18n %}{% autoescape off %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Password Reset - Agricure</title>
  </head>
  <body
    style="
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f8f9fa;
    "
  >
    <table
      width="100%"
      cellpadding="0"
      cellspacing="0"
      style="background-color: #f8f9fa; padding: 20px"
    >
      <tr>
        <td align="center">
          <table
            width="600"
            cellpadding="0"
            cellspacing="0"
            style="
              background-color: #ffffff;
              border-radius: 8px;
              box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
              overflow: hidden;
            "
          >
            <!-- Header -->
            <tr>
              <td
                style="
                  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
                  padding: 40px 20px;
                  text-align: center;
                "
              >
                <h1
                  style="
                    color: #ffffff;
                    margin: 0;
                    font-size: 28px;
                    font-weight: bold;
                  "
                >
                  ðŸŒ± Agricure
                </h1>
                <p
                  style="
                    color: #ffffff;
                    margin: 10px 0 0 0;
                    font-size: 16px;
                    opacity: 0.9;
                  "
                >
                  Smart Agriculture Platform
                </p>
              </td>
            </tr>

            <!-- Content -->
            <tr>
              <td style="padding: 40px 30px">
                <h2 style="color: #1f2937; margin: 0 0 20px 0; font-size: 24px">
                  Password Reset Request
                </h2>

                <p style="margin: 0 0 15px 0; font-size: 16px; color: #4b5563">
                  Hello
                  <strong
                    >{{ user.get_full_name|default:user.get_username }}</strong
                  >,
                </p>

                <p style="margin: 0 0 15px 0; font-size: 16px; color: #4b5563">
                  You're receiving this email because you requested a password
                  reset for your Agricure account.
                </p>

                <p style="margin: 0 0 25px 0; font-size: 16px; color: #4b5563">
                  Click the button below to choose a new password:
                </p>

                <!-- Reset Button -->
                <div style="text-align: center; margin: 30px 0">
                  <a
                    href="{{ protocol }}://{{ domain }}{% url 'users:password_reset_confirm' uidb64=uid token=token %}"
                    style="
                      background: linear-gradient(
                        135deg,
                        #22c55e 0%,
                        #16a34a 100%
                      );
                      color: #ffffff;
                      padding: 15px 30px;
                      text-decoration: none;
                      border-radius: 6px;
                      font-weight: bold;
                      font-size: 16px;
                      display: inline-block;
                      box-shadow: 0 2px 4px rgba(34, 197, 94, 0.3);
                      transition: all 0.3s ease;
                    "
                  >
                    Reset Your Password
                  </a>
                </div>

                <div
                  style="
                    background-color: #f3f4f6;
                    padding: 20px;
                    border-radius: 6px;
                    margin: 25px 0;
                  "
                >
                  <p
                    style="margin: 0 0 10px 0; font-size: 14px; color: #6b7280"
                  >
                    <strong>Your username:</strong> {{ user.get_username }}
                  </p>
                  <p style="margin: 0; font-size: 14px; color: #6b7280">
                    <strong>Reset link expires in:</strong> 24 hours
                  </p>
                </div>

                <p style="margin: 20px 0 0 0; font-size: 14px; color: #6b7280">
                  If you can't click the button above, copy and paste this link
                  into your browser:
                </p>
                <p
                  style="
                    margin: 5px 0 0 0;
                    font-size: 12px;
                    color: #9ca3af;
                    word-break: break-all;
                  "
                >
                  {{ protocol }}://{{ domain }}{% url
                  'users:password_reset_confirm' uidb64=uid token=token %}
                </p>
              </td>
            </tr>

            <!-- Footer -->
            <tr>
              <td
                style="
                  background-color: #f9fafb;
                  padding: 30px;
                  text-align: center;
                  border-top: 1px solid #e5e7eb;
                "
              >
                <p style="margin: 0 0 10px 0; font-size: 14px; color: #6b7280">
                  If you didn't request a password reset, please ignore this
                  email.<br />
                  Your password will not be changed.
                </p>
                <hr
                  style="
                    border: none;
                    border-top: 1px solid #e5e7eb;
                    margin: 20px 0;
                  "
                />
                <p style="margin: 0; font-size: 12px; color: #9ca3af">
                  This email was sent by Agricure<br />
                  Â© {{ current_year|default:"2025" }} Agricure. All rights
                  reserved.
                </p>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
{% endautoescape %}
