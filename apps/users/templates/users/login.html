<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - Agricure</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gradient-to-br from-green-50 to-blue-50">
    <div
      class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"
    >
      <div class="max-w-md w-full space-y-8">
        <div class="text-center">
          <div class="flex justify-center items-center space-x-2 mb-4">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="48"
              height="48"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-green-600"
            >
              <path d="M7 20h10" />
              <path d="M10 20c5.5-2.5.8-6.4 3-10" />
              <path
                d="M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.7-2.3-2.2-2.8-4.2 2.8-.5 4.4 0 5.3.6z"
              />
              <path
                d="M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-3.6-2.8.4-4.4.4-4.9.4z"
              />
            </svg>
            <span class="font-bold text-3xl text-gray-900">Agricure</span>
          </div>
          <h2 class="text-2xl font-bold text-gray-900">Welcome back!</h2>
          <p class="mt-2 text-gray-600">
            Sign in to your agricultural dashboard
          </p>
        </div>

        <div class="bg-white rounded-lg shadow-md p-8">
          <form class="space-y-6" method="post" id="login-form">
            {% csrf_token %} {% if messages %} {% for message in messages %}
            <div
              class="bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-md text-sm"
            >
              {{ message }}
            </div>
            {% endfor %} {% endif %} {% if form.non_field_errors %}
            <div
              class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm"
            >
              {% for error in form.non_field_errors %}
              <p>{{ error }}</p>
              {% endfor %}
            </div>
            {% endif %}

            <div>
              <label
                for="{{ form.username.id_for_label }}"
                class="block text-sm font-medium text-gray-700 mb-1"
              >
                Username or Email
              </label>
              <input
                id="{{ form.username.id_for_label }}"
                name="{{ form.username.name }}"
                type="text"
                required
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 {% if form.username.errors %}border-red-500{% endif %}"
                placeholder="Enter your username or email"
              />
              {% for error in form.username.errors %}
              <p class="text-red-500 text-xs mt-1">{{ error }}</p>
              {% endfor %}
            </div>

            <div>
              <label
                for="{{ form.password.id_for_label }}"
                class="block text-sm font-medium text-gray-700 mb-1"
              >
                Password
              </label>
              <div class="relative">
                <input
                  id="{{ form.password.id_for_label }}"
                  name="{{ form.password.name }}"
                  type="password"
                  required
                  class="w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 {% if form.password.errors %}border-red-500{% endif %}"
                  placeholder="Enter your password"
                />
                <button
                  type="button"
                  id="toggle-password-btn"
                  class="absolute inset-y-0 right-0 pr-3 flex items-center"
                >
                  <!-- Eye Icon SVG -->
                  <svg
                    id="eye-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="text-gray-400"
                  >
                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                  <!-- Eye Off Icon SVG -->
                  <svg
                    id="eye-off-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="text-gray-400 hidden"
                  >
                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24" />
                    <path
                      d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"
                    />
                    <path
                      d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"
                    />
                    <line x1="2" x2="22" y1="2" y2="22" />
                  </svg>
                </button>
              </div>
              {% for error in form.password.errors %}
              <p class="text-red-500 text-xs mt-1">{{ error }}</p>
              {% endfor %}
            </div>

            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <input
                  id="remember-me"
                  name="remember-me"
                  type="checkbox"
                  class="h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"
                />
                <label
                  for="remember-me"
                  class="ml-2 block text-sm text-gray-700"
                >
                  Remember me
                </label>
              </div>

              <a
                href="{% url 'users:password_reset' %}"
                class="text-sm text-green-600 hover:text-green-500 font-medium"
              >
                Forgot password?
              </a>
            </div>

            <button
              type="submit"
              id="submit-button"
              class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
            >
              <span id="button-text">Sign In</span>
              <span id="button-loader" class="hidden">
                <!-- Loader Icon SVG -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="animate-spin h-5 w-5 mr-2"
                >
                  <path d="M21 12a9 9 0 1 1-6.219-8.56" />
                </svg>
                Signing in...
              </span>
            </button>
          </form>

          <div class="mt-6">
            <div class="text-center space-y-3">
              <div>
                <span class="text-gray-600">Don't have an account? </span>
                <a
                  href="{% url 'users:register' %}"
                  class="font-medium text-green-600 hover:text-green-500"
                >
                  Create one now
                </a>
              </div>
              <div class="pt-2 border-t border-gray-200">
                <a
                  href="{% url 'users:landing' %}"
                  class="inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition-colors"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="mr-2"
                  >
                    <path d="m12 19-7-7 7-7" />
                    <path d="M19 12H5" />
                  </svg>
                  Back to Home
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const passwordInput = document.getElementById(
          "{{ form.password.id_for_label }}"
        );
        const togglePasswordBtn = document.getElementById(
          "toggle-password-btn"
        );
        const eyeIcon = document.getElementById("eye-icon");
        const eyeOffIcon = document.getElementById("eye-off-icon");

        togglePasswordBtn.addEventListener("click", function () {
          const type =
            passwordInput.getAttribute("type") === "password"
              ? "text"
              : "password";
          passwordInput.setAttribute("type", type);

          eyeIcon.classList.toggle("hidden");
          eyeOffIcon.classList.toggle("hidden");
        });

        const loginForm = document.getElementById("login-form");
        const submitButton = document.getElementById("submit-button");
        const buttonText = document.getElementById("button-text");
        const buttonLoader = document.getElementById("button-loader");

        loginForm.addEventListener("submit", function () {
          submitButton.setAttribute("disabled", "true");
          buttonText.classList.add("hidden");
          buttonLoader.classList.remove("hidden");
          buttonLoader.classList.add("flex", "items-center");
        });
      });
    </script>
  </body>
</html>
